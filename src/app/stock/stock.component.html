<div>
    <p class="main-header">Stock Managing Section <a href="/company" class="back-button">Back</a></p>
</div>
<div class="body">
    <div>
        <p><b>Please Find below the Stock Analysis for Your Company:</b></p>
        <table class="table table trapped">
            <tbody>           
                    <tr><td>Min :</td><td>{{min}}</td></tr>
                    <tr><td>Max :</td><td>{{max}}</td></tr>
                    <tr><td>Avg :</td><td>{{avg}}</td></tr>
            </tbody>
        </table>
    </div>
    <div class="spaceBetweenDivs">
        <h4><b>Add New Stock Details:</b></h4>
        <mat-expansion-panel style="width:30%">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Add
                </mat-panel-title>
            </mat-expansion-panel-header>
            <form #stockForm="ngForm">
        <div>
            <mat-form-field>
                <mat-label>Company Code</mat-label>
                <input matInput name="companyCode" value={{companyCode}} disabled required>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field>
                <mat-label>Stock Price</mat-label>
                <input matInput name="stockPrice" #stockPrice="ngModel" pattern="^\d+\.\d+$" [(ngModel)]="stockObject.stockPrice" required>
            </mat-form-field><br>
            <span *ngIf="stockPrice.invalid && stockPrice.touched" style="color:red">Please Enter the valid Stock Price(It Should be fractional)!!</span>
        </div>
        <mat-action-row>
            <div class="example-button-container">
                <button mat-mini-fab color="primary" (click)="addStock()" [disabled]="stockForm.invalid">
                  <mat-icon>plus_one</mat-icon>
                </button>
              </div>
        </mat-action-row>
    </form>
        </mat-expansion-panel><br><br>
        <span *ngIf="addFlag" style="color:green;font-size: 25px;">{{successMesage}}</span>
    </div><br><br>
    <div class="spaceBetweenDivs">
        <h4><b>Search Stock Details Between the two Dates:</b></h4>
        <form #dateForm="ngForm">
        <label>From:</label>
        <mat-form-field class="example-full-width space-between-datepicker" appearance="fill">
            <mat-label>Choose a start date</mat-label>
            <input matInput [matDatepicker]="picker1" name="date1" #date1="ngModel" [(ngModel)]="stockObject.startDate" required>
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker1">
              <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
            </mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
          <label>To:</label>
        <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>Choose an end date</mat-label>
            <input matInput [matDatepicker]="picker2" name="date2" #date2="ngModel" [(ngModel)]="stockObject.endDate" required>
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker2">
              <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
            </mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
    <button mat-raised-button color="warn" class="button-alignment" (click)="viewStockBetweenTheDates(stockObject.startDate,stockObject.endDate)" [disabled]="dateForm.invalid">View</button>
</form><br><br>
        <table *ngIf="showViewBetweenDatesTable" mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <!-- Stock Price Column -->
            <ng-container matColumnDef="Stock Price">
              <th mat-header-cell *matHeaderCellDef>Stock Price</th>
              <td mat-cell *matCellDef="let stockObject">{{stockObject.stockPrice}}</td>
            </ng-container>
          
            <!-- Date Column -->
            <ng-container matColumnDef="Date">
              <th mat-header-cell *matHeaderCellDef>Date(YYYY-MM-dd)</th>
              <td mat-cell *matCellDef="let stockObject">{{stockObject.timeStamp.split(" ")[0]}}</td>
            </ng-container>
          
            <!-- Time Column -->
            <ng-container matColumnDef="Time">
              <th mat-header-cell *matHeaderCellDef>Time(HH:mm:ss)</th>
              <td mat-cell *matCellDef="let stockObject">{{stockObject.timeStamp.split(" ")[1].split(".")[0]}}</td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table><br><br>
          <span *ngIf="flag">{{noDataFoundMessage}}</span>
          <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>           
    </div>
</div>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>